(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2671:(e,a,r)=>{"use strict";r.d(a,{TaskAllocator:()=>eT});var t=r(5155),s=r(2115);let n="/.netlify/functions/tasks",l="default-user";async function i(e){try{console.log("Enviando datos a la API:",e);let a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","x-user-id":l},body:JSON.stringify(e)});if(!a.ok){let e=await a.text();throw console.error("Error response from server:",e),Error("Failed to save data: ".concat(a.status," ").concat(a.statusText))}let r=await a.json();console.log("Respuesta del servidor:",r)}catch(e){throw console.error("Error saving data:",e),e}}async function o(){try{let e=await fetch(n,{headers:{"x-user-id":l}});if(!e.ok)throw Error("Failed to load data");return e.json()}catch(e){return console.error("Error loading data:",e),null}}var d=r(2177),c=r(221),m=r(5594),u=r(4253),f=r(2085),x=r(2596),p=r(9688);function h(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,p.QP)((0,x.$)(a))}let g=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=s.forwardRef((e,a)=>{let{className:r,variant:s,size:n,asChild:l=!1,...i}=e,o=l?u.DX:"button";return(0,t.jsx)(o,{className:h(g({variant:s,size:n,className:r})),ref:a,...i})});j.displayName="Button";let v=s.forwardRef((e,a)=>{let{className:r,type:s,...n}=e;return(0,t.jsx)("input",{type:s,className:h("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a,...n})});v.displayName="Input";var N=r(968);let b=(0,f.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(N.b,{ref:a,className:h(b(),r),...s})});y.displayName=N.b.displayName;let w=d.Op,C=s.createContext({}),A=e=>{let{...a}=e;return(0,t.jsx)(C.Provider,{value:{name:a.name},children:(0,t.jsx)(d.xI,{...a})})},k=()=>{let e=s.useContext(C),a=s.useContext(I),{getFieldState:r,formState:t}=(0,d.xW)(),n=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=a;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},I=s.createContext({}),S=s.forwardRef((e,a)=>{let{className:r,...n}=e,l=s.useId();return(0,t.jsx)(I.Provider,{value:{id:l},children:(0,t.jsx)("div",{ref:a,className:h("space-y-2",r),...n})})});S.displayName="FormItem";let T=s.forwardRef((e,a)=>{let{className:r,...s}=e,{error:n,formItemId:l}=k();return(0,t.jsx)(y,{ref:a,className:h(n&&"text-destructive",r),htmlFor:l,...s})});T.displayName="FormLabel";let E=s.forwardRef((e,a)=>{let{...r}=e,{error:s,formItemId:n,formDescriptionId:l,formMessageId:i}=k();return(0,t.jsx)(u.DX,{ref:a,id:n,"aria-describedby":s?"".concat(l," ").concat(i):"".concat(l),"aria-invalid":!!s,...r})});E.displayName="FormControl";let R=s.forwardRef((e,a)=>{let{className:r,...s}=e,{formDescriptionId:n}=k();return(0,t.jsx)("p",{ref:a,id:n,className:h("text-sm text-muted-foreground",r),...s})});R.displayName="FormDescription";let F=s.forwardRef((e,a)=>{var r;let{className:s,children:n,...l}=e,{error:i,formMessageId:o}=k(),d=i?String(null!=(r=null==i?void 0:i.message)?r:""):n;return d?(0,t.jsx)("p",{ref:a,id:o,className:h("text-sm font-medium text-destructive",s),...l,children:d}):null});F.displayName="FormMessage";var D=r(4852),O=r(9556),M=r(7381),_=r(518);let P=D.bL;D.YJ;let H=D.WT,V=s.forwardRef((e,a)=>{let{className:r,children:s,...n}=e;return(0,t.jsxs)(D.l9,{ref:a,className:h("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...n,children:[s,(0,t.jsx)(D.In,{asChild:!0,children:(0,t.jsx)(O.A,{className:"h-4 w-4 opacity-50"})})]})});V.displayName=D.l9.displayName;let L=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(D.PP,{ref:a,className:h("flex cursor-default items-center justify-center py-1",r),...s,children:(0,t.jsx)(M.A,{className:"h-4 w-4"})})});L.displayName=D.PP.displayName;let z=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(D.wn,{ref:a,className:h("flex cursor-default items-center justify-center py-1",r),...s,children:(0,t.jsx)(O.A,{className:"h-4 w-4"})})});z.displayName=D.wn.displayName;let U=s.forwardRef((e,a)=>{let{className:r,children:s,position:n="popper",...l}=e;return(0,t.jsx)(D.ZL,{children:(0,t.jsxs)(D.UC,{ref:a,className:h("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...l,children:[(0,t.jsx)(L,{}),(0,t.jsx)(D.LM,{className:h("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,t.jsx)(z,{})]})})});U.displayName=D.UC.displayName,s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(D.JU,{ref:a,className:h("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=D.JU.displayName;let q=s.forwardRef((e,a)=>{let{className:r,children:s,...n}=e;return(0,t.jsxs)(D.q7,{ref:a,className:h("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(D.VF,{children:(0,t.jsx)(_.A,{className:"h-4 w-4"})})}),(0,t.jsx)(D.p4,{children:s})]})});q.displayName=D.q7.displayName,s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(D.wv,{ref:a,className:h("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=D.wv.displayName;var Y=r(6981);let J=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(Y.bL,{ref:a,className:h("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,t.jsx)(Y.C1,{className:h("flex items-center justify-center text-current"),children:(0,t.jsx)(_.A,{className:"h-4 w-4"})})})});J.displayName=Y.bL.displayName;var X=r(4301);let G=[{id:"New Client",label:"Cliente Nuevo"},{id:"Maintenance",label:"Mantenimiento"}],K=m.Ik({description:m.Yj().min(1,"La descripci\xf3n de la tarea es requerida."),duration:m.au.number().min(.1,"La duraci\xf3n debe ser de al menos 0.1 horas."),clientId:m.Yj().optional(),tags:m.YO(m.Yj()).optional(),personId:m.Yj().optional()}),W="none",B="auto";function Q(e){let{onAddTask:a,clients:r,people:s}=e,n=(0,d.mN)({resolver:(0,c.u)(K),defaultValues:{description:"",duration:1,clientId:W,tags:[],personId:B}});return(0,t.jsx)(w,{...n,children:(0,t.jsxs)("form",{onSubmit:n.handleSubmit(function(e){let r=e.clientId===W?void 0:e.clientId,t=e.personId===B?void 0:e.personId,s=e.tags||[];a(e.description,e.duration,s,r,t),n.reset({description:"",duration:1,clientId:W,tags:[],personId:B})}),className:"space-y-4",children:[(0,t.jsx)(A,{control:n.control,name:"description",render:e=>{let{field:a}=e;return(0,t.jsxs)(S,{children:[(0,t.jsx)(T,{children:"Descripci\xf3n de la Tarea"}),(0,t.jsx)(E,{children:(0,t.jsx)(v,{placeholder:"p. ej., Dise\xf1ar la nueva p\xe1gina de inicio",...a})}),(0,t.jsx)(F,{})]})}}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(A,{control:n.control,name:"personId",render:e=>{let{field:a}=e;return(0,t.jsxs)(S,{children:[(0,t.jsx)(T,{children:"Asignar a"}),(0,t.jsxs)(P,{onValueChange:a.onChange,defaultValue:a.value,value:a.value,children:[(0,t.jsx)(E,{children:(0,t.jsx)(V,{children:(0,t.jsx)(H,{placeholder:"Selecciona a una persona"})})}),(0,t.jsxs)(U,{children:[(0,t.jsx)(q,{value:B,children:"Asignaci\xf3n Autom\xe1tica"}),s.map(e=>(0,t.jsx)(q,{value:e.id,children:e.name},e.id))]})]}),(0,t.jsx)(F,{})]})}}),(0,t.jsx)(A,{control:n.control,name:"clientId",render:e=>{let{field:a}=e;return(0,t.jsxs)(S,{children:[(0,t.jsx)(T,{children:"Cliente"}),(0,t.jsxs)(P,{onValueChange:a.onChange,defaultValue:a.value,value:a.value,children:[(0,t.jsx)(E,{children:(0,t.jsx)(V,{children:(0,t.jsx)(H,{placeholder:"Selecciona un cliente"})})}),(0,t.jsxs)(U,{children:[(0,t.jsx)(q,{value:W,children:"Ninguno"}),r.map(e=>(0,t.jsx)(q,{value:e.id,children:e.name},e.id))]})]}),(0,t.jsx)(F,{})]})}}),(0,t.jsx)(A,{control:n.control,name:"duration",render:e=>{let{field:a}=e;return(0,t.jsxs)(S,{children:[(0,t.jsx)(T,{children:"Duraci\xf3n (horas)"}),(0,t.jsx)(E,{children:(0,t.jsx)(v,{type:"number",step:"0.5",placeholder:"p. ej., 2.5",...a})}),(0,t.jsx)(F,{})]})}})]}),(0,t.jsx)(A,{control:n.control,name:"tags",render:()=>(0,t.jsxs)(S,{children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)(T,{className:"text-base",children:"Etiquetas"}),(0,t.jsx)(R,{children:"Selecciona las etiquetas para esta tarea."})]}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:G.map(e=>(0,t.jsx)(A,{control:n.control,name:"tags",render:a=>{var r;let{field:s}=a;return(0,t.jsxs)(S,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,t.jsx)(E,{children:(0,t.jsx)(J,{checked:null==(r=s.value)?void 0:r.includes(e.id),onCheckedChange:a=>{var r;return a?s.onChange([...s.value||[],e.id]):s.onChange(null==(r=s.value)?void 0:r.filter(a=>a!==e.id))}})}),(0,t.jsx)(T,{className:"font-normal",children:e.label})]},e.id)}},e.id))}),(0,t.jsx)(F,{})]})}),(0,t.jsxs)(j,{type:"submit",className:"w-full",children:[(0,t.jsx)(X.A,{className:"mr-2 h-4 w-4"})," A\xf1adir y Asignar Tarea"]})]})})}let Z=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:h("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});Z.displayName="Card";let $=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:h("flex flex-col space-y-1.5 p-6",r),...s})});$.displayName="CardHeader";let ee=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:h("text-2xl font-semibold leading-none tracking-tight",r),...s})});ee.displayName="CardTitle";let ea=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:h("text-sm text-muted-foreground",r),...s})});ea.displayName="CardDescription";let er=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:h("p-6 pt-0",r),...s})});er.displayName="CardContent",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:h("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter";var et=r(286);function es(e){let{people:a}=e,r=e=>e.tasks.filter(e=>!e.isCompleted).length;return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold font-headline mb-4",children:"Panel de Carga de Trabajo"}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-3",children:a.map(e=>{let a=r(e),s=1!==a?"s":"";return(0,t.jsxs)(Z,{className:"shadow-md hover:shadow-lg transition-shadow",children:[(0,t.jsxs)($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(ee,{className:"text-sm font-medium",children:e.name}),(0,t.jsx)(et.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(er,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[e.totalHours.toFixed(1)," horas"]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a," tarea",s," activa",s," asignada",s]})]})]},e.id)})})]})}var en=r(7655);let el=s.forwardRef((e,a)=>{let{className:r,children:s,...n}=e;return(0,t.jsxs)(en.bL,{ref:a,className:h("relative overflow-hidden",r),...n,children:[(0,t.jsx)(en.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,t.jsx)(ei,{}),(0,t.jsx)(en.OK,{})]})});el.displayName=en.bL.displayName;let ei=s.forwardRef((e,a)=>{let{className:r,orientation:s="vertical",...n}=e;return(0,t.jsx)(en.VM,{ref:a,orientation:s,className:h("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...n,children:(0,t.jsx)(en.lr,{className:"relative flex-1 rounded-full bg-border"})})});ei.displayName=en.VM.displayName;let eo=(0,f.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ed(e){let{className:a,variant:r,...s}=e;return(0,t.jsx)("div",{className:h(eo({variant:r}),a),...s})}var ec=r(7082),em=r(3054);let eu={"New Client":"Cliente Nuevo",Maintenance:"Mantenimiento"};function ef(e){let{people:a,onToggleTask:r}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold font-headline mb-4",children:"Tareas Asignadas"}),(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-3",children:a.map(e=>(0,t.jsxs)(Z,{className:"flex flex-col shadow-md",children:[(0,t.jsxs)($,{children:[(0,t.jsxs)(ee,{children:["Tareas de ",e.name]}),(0,t.jsxs)(ea,{children:["Carga de trabajo activa: ",e.totalHours.toFixed(1)," horas"]})]}),(0,t.jsx)(er,{className:"flex-grow",children:(0,t.jsx)(el,{className:"h-72 w-full",children:(0,t.jsx)("div",{className:"pr-4 space-y-4",children:e.tasks.length>0?[...e.tasks].sort((e,a)=>(e.isCompleted?1:-1)-(a.isCompleted?1:-1)||e.description.localeCompare(a.description)).map(a=>{var s;return(0,t.jsx)(Z,{className:h("border-l-4",a.isCompleted?"border-transparent bg-muted/50":"border-accent"),children:(0,t.jsx)(er,{className:"p-3",children:(0,t.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,t.jsx)(J,{id:"task-".concat(a.id),className:"mt-1",checked:a.isCompleted,onCheckedChange:()=>r(e.id,a.id),"aria-label":"Marcar tarea como completada"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{htmlFor:"task-".concat(a.id),className:h("font-medium pr-2 break-words cursor-pointer",a.isCompleted&&"line-through text-muted-foreground"),children:a.description}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[a.clientName&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[(0,t.jsx)(ec.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:a.clientName})]}),null==(s=a.tags)?void 0:s.map(e=>(0,t.jsxs)(ed,{variant:"New Client"===e?"default":"secondary",className:"text-xs",children:[(0,t.jsx)(em.A,{className:"h-3 w-3 mr-1"}),eu[e]]},e))]})]})]}),(0,t.jsxs)(ed,{variant:a.isCompleted?"secondary":"default",className:"bg-accent text-accent-foreground hover:bg-accent/90 shrink-0 whitespace-nowrap",children:[a.duration,"h"]})]})})},a.id)}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground rounded-lg border-2 border-dashed h-60",children:(0,t.jsx)("p",{children:"A\xfan no hay tareas asignadas."})})})})})]},e.id))})]})}let ex=[],ep=[],eh=JSON.parse('[{"id":"client-1","name":"Simtex"},{"id":"client-2","name":"Perfumes Essentia"},{"id":"client-3","name":"Sifsa"},{"id":"client-4","name":"Leather"},{"id":"client-5","name":"Emilio Fotograf\xeda"},{"id":"client-6","name":"Polar Autopartes"},{"id":"client-7","name":"Coloquios"},{"id":"client-8","name":"Alpha Hardin"},{"id":"client-9","name":"Kohui"},{"id":"client-10","name":"Importaciones y Exportaciones Moctezuma"},{"id":"client-11","name":"Planet Soccer"},{"id":"client-12","name":"Cruz Roja"},{"id":"client-13","name":"Contexto Empresarial"},{"id":"client-14","name":"DC Solution"},{"id":"client-15","name":"Terapeuta Adriana"},{"id":"client-16","name":"Caficon"},{"id":"client-17","name":"Hermilio"}]');var eg=r(3896);let ej=m.Ik({clientName:m.Yj().min(1,"El nombre del cliente es requerido.")});function ev(e){let{onAddClient:a}=e,r=(0,d.mN)({resolver:(0,c.u)(ej),defaultValues:{clientName:""}});return(0,t.jsx)(w,{...r,children:(0,t.jsxs)("form",{onSubmit:r.handleSubmit(function(e){a(e.clientName),r.reset()}),className:"flex items-end gap-4",children:[(0,t.jsx)(A,{control:r.control,name:"clientName",render:e=>{let{field:a}=e;return(0,t.jsxs)(S,{className:"flex-grow",children:[(0,t.jsx)(T,{children:"Nombre del Cliente"}),(0,t.jsx)(E,{children:(0,t.jsx)(v,{placeholder:"p. ej., Dise\xf1os Futura",...a})}),(0,t.jsx)(F,{})]})}}),(0,t.jsxs)(j,{type:"submit",children:[(0,t.jsx)(eg.A,{className:"mr-2 h-4 w-4"})," A\xf1adir Cliente"]})]})})}let eN=0,eb=new Map,ey=e=>{if(eb.has(e))return;let a=setTimeout(()=>{eb.delete(e),ek({type:"REMOVE_TOAST",toastId:e})},1e6);eb.set(e,a)},ew=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=a;return r?ey(r):e.toasts.forEach(e=>{ey(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},eC=[],eA={toasts:[]};function ek(e){eA=ew(eA,e),eC.forEach(e=>{e(eA)})}function eI(e){let{...a}=e,r=(eN=(eN+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>ek({type:"DISMISS_TOAST",toastId:r});return ek({type:"ADD_TOAST",toast:{...a,id:r,open:!0,onOpenChange:e=>{e||t()}}}),{id:r,dismiss:t,update:e=>ek({type:"UPDATE_TOAST",toast:{...e,id:r}})}}let eS=[{id:"1",name:"Omar",clientIds:["client-1","client-2"]},{id:"2",name:"Fernando",clientIds:["client-3"]},{id:"3",name:"Julio",clientIds:["client-1","client-4"]}];function eT(){let[e,a]=(0,s.useState)([]),[r,n]=(0,s.useState)([]),[l,d]=(0,s.useState)(!1),{toast:c}=function(){let[e,a]=s.useState(eA);return s.useEffect(()=>(eC.push(a),()=>{let e=eC.indexOf(a);e>-1&&eC.splice(e,1)}),[e]),{...e,toast:eI,dismiss:e=>ek({type:"DISMISS_TOAST",toastId:e})}}();return((0,s.useEffect)(()=>{(async()=>{try{let e=await o();if((null==e?void 0:e.people)&&(null==e?void 0:e.clients))a(e.people),n(e.clients);else{let e=[...ex,...ep],r=new Map(eh.map(e=>[e.id,e.name])),t=eS.map(e=>({...e,tasks:[],totalHours:0}));e.forEach((e,a)=>{let s=a%t.length,n={...e,clientName:e.clientId?r.get(e.clientId):void 0};t[s].tasks.push(n),e.isCompleted||(t[s].totalHours+=e.duration)}),a(t),n(eh),await i({people:t,clients:eh})}d(!0)}catch(e){console.error("Error initializing data:",e),d(!0)}})()},[]),(0,s.useEffect)(()=>{l&&(async()=>{try{console.log("Guardando datos:",{people:e,clients:r}),await i({people:e,clients:r}),console.log("Datos guardados exitosamente")}catch(e){console.error("Error al guardar el estado en la API:",e),c({title:"Error al guardar",description:"No se pudo guardar el estado en la API. Por favor, revisa tu conexi\xf3n o contacta al administrador.",variant:"destructive"})}})()},[e,r,l]),l)?(0,t.jsx)("div",{className:"min-h-screen bg-background text-foreground p-4 sm:p-6 md:p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,t.jsxs)("header",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold font-headline",style:{color:"hsl(var(--primary))"},children:"TaskFlow Allocator"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Asigna tareas de forma inteligente seg\xfan la carga de trabajo."})]}),(0,t.jsxs)("main",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,t.jsxs)(Z,{className:"shadow-lg",children:[(0,t.jsx)($,{children:(0,t.jsx)(ee,{children:"A\xf1adir un Nuevo Cliente"})}),(0,t.jsx)(er,{children:(0,t.jsx)(ev,{onAddClient:e=>{let a={id:"client-".concat(crypto.randomUUID()),name:e};n(e=>[...e,a])}})})]}),(0,t.jsxs)(Z,{className:"shadow-lg",children:[(0,t.jsx)($,{children:(0,t.jsx)(ee,{children:"A\xf1adir una Nueva Tarea"})}),(0,t.jsx)(er,{children:(0,t.jsx)(Q,{onAddTask:(t,s,n,l,i)=>{var o;let d=i?e.find(e=>e.id===i):[...e].sort((e,a)=>e.totalHours-a.totalHours)[0];if(!d)return void console.error("No se pudo encontrar a la persona para asignar la tarea.");let c=l?null==(o=r.find(e=>e.id===l))?void 0:o.name:void 0,m={id:crypto.randomUUID(),description:t,duration:s,isCompleted:!1,clientId:l,clientName:c,tags:n};a(e=>e.map(e=>{if(e.id===d.id){let a=[...e.tasks,m];return{...e,tasks:a,totalHours:e.totalHours+s}}return e}))},clients:r,people:e})})]})]}),(0,t.jsx)(es,{people:e}),(0,t.jsx)(ef,{people:e,onToggleTask:(e,r)=>{a(a=>a.map(a=>{if(a.id===e){let e=0,t=a.tasks.map(a=>a.id===r?(e=a.isCompleted?a.duration:-a.duration,{...a,isCompleted:!a.isCompleted}):a);return{...a,tasks:t,totalHours:a.totalHours+e}}return a}))}})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-background text-foreground p-4 sm:p-6 md:p-8 flex items-center justify-center",children:(0,t.jsx)("p",{children:"Cargando..."})})}},7140:(e,a,r)=>{Promise.resolve().then(r.bind(r,2671))}},e=>{var a=a=>e(e.s=a);e.O(0,[911,441,684,358],()=>a(7140)),_N_E=e.O()}]);